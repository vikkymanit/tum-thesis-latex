\section{Intercepting Operations}

To intercept packets coming into the server or going out of the server, Apache ActiveMQ Artemis provides \textit{interceptors} \parencite{artemis_interceptors}. Interceptors allow the packets to be modified or inspected. Interceptors are dependent on the protocol for, e.g., to intercept MQTT packets MQTTInterceptor interface has to be used by the classes that need to intercept the packets. 

Interceptors are of two types, incoming interceptors, and outgoing interceptors. Both interceptors are configured in the \textit{broker.xml} file.

\subsubsection{Incoming Interceptor} \label{subsubsection:in_interceptor}

An incoming interceptor intercepts packets entering the server. Listing \ref{lst:incoming} shows example configuration of an incoming interceptor implemented by the class \textit{SamplingBrokerInterceptor}.

\bigskip
\begin{lstlisting}[style=XmlInputStyle,caption=Configuring incoming interceptor example, label={lst:incoming}]
<remoting-incoming-interceptors>
   <class-name>org.apache.activemq.artemis.core.protocol.mqtt.SamplingBrokerInterceptor</class-name>
</remoting-incoming-interceptors>
\end{lstlisting}

\subsubsection{Outgoing Interceptor}

An outgoing interceptor intercepts packets exiting the server. Listing \ref{lst:outgoing} shows example configuration of an outgoing interceptor implemented by the class \textit{ConnectionInterceptor}.

\bigskip
\begin{lstlisting}[style=XmlInputStyle,caption=Configuring outgoing interceptor example, label={lst:outgoing}]
<remoting-outgoing-interceptors>
   <class-name>org.apache.activemq.artemis.core.protocol.mqtt.ConnectionInterceptor</class-name>
</remoting-outgoing-interceptors>
\end{lstlisting}